# 紫微斗數網站開發任務清單 (Development Tickets)

**專案版本**: 2.0
**更新日期**: 2025-10-29
**狀態追蹤**: [待開發] [開發中] [測試中] [已完成]

---

## 🎯 Sprint 目標

完成紫微斗數網站的多語言支援及功能擴充，包含：
- 三語言介面（中、英、日）
- 地點輸入功能
- 24小時制時間轉換
- Buy Me a Coffee 整合

---

## 📋 Ticket 清單

### Phase 1: 多語言基礎架構

#### TICKET-001: 建立多語言檔案結構
**優先級**: 🔴 高
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
建立 6 個 HTML 檔案作為多語言版本的基礎。

**任務內容**:
1. 複製 `index.html` → `index-en.html`
2. 複製 `index.html` → `index-ja.html`
3. 複製 `result.html` → `result-en.html`
4. 複製 `result.html` → `result-ja.html`
5. 保持原有 `index.html` 和 `result.html` 作為中文版（預設）

**驗收標準**:
- [ ] 6 個 HTML 檔案都存在
- [ ] 所有檔案都可以在瀏覽器中正常開啟
- [ ] JS 和 CSS 引用路徑正確

**相依性**: 無

---

#### TICKET-002: 實作語言切換器 UI
**優先級**: 🔴 高
**預估時間**: 45 分鐘
**狀態**: [ ] 待開發

**描述**:
在所有頁面的右上角加入語言切換器，讓使用者可以切換語言。

**任務內容**:
1. 設計語言切換器的 HTML 結構
2. 撰寫 CSS 樣式（響應式）
3. 建立 `js/language.js` 共用檔案
4. 實作語言偏好記憶功能（localStorage）
5. 在 6 個頁面都加入切換器

**UI 規格**:
```
┌─────────────────────────────────┐
│  紫微斗數命盤    [中文 English 日本語] │
└─────────────────────────────────┘
```

**驗收標準**:
- [ ] 語言切換器顯示在頁面右上角
- [ ] 當前語言有視覺高亮效果
- [ ] 點擊切換語言後正確跳轉
- [ ] localStorage 正確記錄語言偏好
- [ ] 手機版顯示正常（不破版）

**相依性**: TICKET-001

---

#### TICKET-003: 翻譯 index 頁面（英文版）
**優先級**: 🔴 高
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
將 `index-en.html` 的所有文字內容翻譯成英文。

**翻譯範圍**:
- [ ] 頁面標題
- [ ] 表單標籤（出生日期、時辰、性別等）
- [ ] 按鈕文字
- [ ] 提示訊息
- [ ] 隱私聲明
- [ ] 頁面 title 和 meta 標籤

**參考翻譯**:
| 中文 | English |
|------|---------|
| 紫微斗數命盤 | Zi Wei Dou Shu Chart |
| 出生日期 | Date of Birth |
| 性別 | Gender |
| 開始計算 | Calculate |
| 使用現在時間 | Use Current Time |

**驗收標準**:
- [ ] 所有可見文字都已翻譯
- [ ] 翻譯語意正確
- [ ] 無中文殘留（除專有名詞）
- [ ] HTML 標籤的 lang 屬性改為 "en"

**相依性**: TICKET-001, TICKET-002

---

#### TICKET-004: 翻譯 index 頁面（日文版）
**優先級**: 🔴 高
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
將 `index-ja.html` 的所有文字內容翻譯成日文。

**翻譯範圍**:
- [ ] 頁面標題
- [ ] 表單標籤
- [ ] 按鈕文字
- [ ] 提示訊息
- [ ] 隱私聲明
- [ ] 頁面 title 和 meta 標籤

**參考翻譯**:
| 中文 | 日本語 |
|------|--------|
| 紫微斗數命盤 | 紫微斗数命盤 |
| 出生日期 | 生年月日 |
| 性別 | 性別 |
| 開始計算 | 計算開始 |
| 使用現在時間 | 現在の時刻 |

**驗收標準**:
- [ ] 所有可見文字都已翻譯
- [ ] 翻譯語意正確（建議請日文母語者確認）
- [ ] HTML 標籤的 lang 屬性改為 "ja"

**相依性**: TICKET-001, TICKET-002

---

#### TICKET-005: 翻譯 result 頁面（英文版）
**優先級**: 🔴 高
**預估時間**: 20 分鐘
**狀態**: [ ] 待開發

**描述**:
將 `result-en.html` 的所有文字內容翻譯成英文。

**翻譯範圍**:
- [ ] 頁面標題
- [ ] 返回按鈕
- [ ] 命盤術語（十二宮位、星曜等）
- [ ] 載入提示

**注意事項**:
- 紫微斗數術語建議保留中文加英文註解
- 例如：「命宮 (Life Palace)」

**驗收標準**:
- [ ] 所有可見文字都已翻譯
- [ ] 術語翻譯準確
- [ ] HTML lang 屬性為 "en"

**相依性**: TICKET-001, TICKET-002

---

#### TICKET-006: 翻譯 result 頁面（日文版）
**優先級**: 🔴 高
**預估時間**: 20 分鐘
**狀態**: [ ] 待開發

**描述**:
將 `result-ja.html` 的所有文字內容翻譯成日文。

**翻譯範圍**:
- [ ] 頁面標題
- [ ] 返回按鈕
- [ ] 命盤術語
- [ ] 載入提示

**驗收標準**:
- [ ] 所有可見文字都已翻譯
- [ ] 術語翻譯準確
- [ ] HTML lang 屬性為 "ja"

**相依性**: TICKET-001, TICKET-002

---

### Phase 2: 功能擴充

#### TICKET-007: 新增地點輸入欄位
**優先級**: 🟡 中
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
在輸入表單中新增「出生地點」欄位，並整合到資料流程中。

**任務內容**:
1. 在 3 個 index 頁面加入地點輸入欄位
2. 更新 JavaScript 收集地點資料
3. 儲存到 localStorage
4. 傳送到 Google Sheets

**UI 位置**:
```
出生日期：[____] 年 [__] 月 [__] 日
出生地點：[__________________]  ← 新增
出生時辰：[______]
性別：○ 男 ○ 女
```

**欄位規格**:
- 類型：`<input type="text">`
- ID：`location`
- Placeholder（中）：例如：台北市
- Placeholder（英）：e.g., Taipei
- Placeholder（日）：例：東京
- 必填：否（optional）
- 最大長度：100 字元

**驗收標準**:
- [ ] 3 個 index 頁面都有地點欄位
- [ ] 欄位樣式與現有輸入框一致
- [ ] placeholder 文字符合各語言
- [ ] 資料正確儲存到 localStorage
- [ ] 手機版顯示正常

**相依性**: TICKET-003, TICKET-004

---

#### TICKET-008: 改為 24 小時制時間輸入
**優先級**: 🟡 中
**預估時間**: 45 分鐘
**狀態**: [ ] 待開發

**描述**:
將時辰選擇改為 24 小時制時間輸入，並自動轉換為對應時辰。

**任務內容**:
1. 將 `<select>` 時辰選單改為 `<input type="time">`
2. 實作時間轉時辰的轉換函數
3. 即時顯示對應的時辰
4. 更新 3 個 index 頁面

**UI 設計**:
```
出生時間：[12:30]  → 午時 (11:00-13:00)
          ↑ time input   ↑ 即時顯示
```

**轉換邏輯**:
```javascript
時間範圍 → 時辰
23:00-00:59 → 子
01:00-02:59 → 丑
03:00-04:59 → 寅
05:00-06:59 → 卯
07:00-08:59 → 辰
09:00-10:59 → 巳
11:00-12:59 → 午
13:00-14:59 → 未
15:00-16:59 → 申
17:00-18:59 → 酉
19:00-20:59 → 戌
21:00-22:59 → 亥
```

**驗收標準**:
- [ ] 時間輸入框正常運作
- [ ] 時辰轉換邏輯正確
- [ ] 即時顯示當前時辰
- [ ] 23:00 之後正確處理為子時
- [ ] 保留「使用現在時間」功能
- [ ] 英文和日文版的時辰顯示正確

**相依性**: TICKET-003, TICKET-004

---

#### TICKET-009: 建立時辰轉換共用函數
**優先級**: 🟡 中
**預估時間**: 20 分鐘
**狀態**: [ ] 待開發

**描述**:
建立 `js/time-converter.js`，包含時間轉時辰的共用函數。

**函數規格**:
```javascript
/**
 * 將 24 小時制時間轉換為時辰
 * @param {string} time - 格式 "HH:MM"
 * @returns {object} { earthlyBranch: "午", chineseName: "午時" }
 */
function timeToEarthlyBranch(time) {
    // 實作邏輯
}

/**
 * 取得時辰的時間範圍
 * @param {string} earthlyBranch - 時辰（如"午"）
 * @returns {string} "11:00-13:00"
 */
function getTimeRange(earthlyBranch) {
    // 實作邏輯
}
```

**驗收標準**:
- [ ] 函數邏輯正確
- [ ] 包含完整註解
- [ ] 通過單元測試
- [ ] 處理邊界情況（如 23:00, 00:00）

**相依性**: TICKET-008

---

#### TICKET-010: 整合 Buy Me a Coffee
**優先級**: 🟢 低
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
在網站中加入 Buy Me a Coffee 捐款按鈕。

**任務內容**:
1. 取得 Buy Me a Coffee 嵌入程式碼
2. 在 6 個頁面都加入浮動按鈕
3. 設定多語言文案
4. 調整樣式避免干擾使用

**實作方式**:
選用 Buy Me a Coffee 官方的浮動 Widget：
```html
<script data-name="BMC-Widget"
        src="https://cdnjs.buymeacoffee.com/1.0.0/widget.prod.min.js"
        data-id="您的用戶名"
        data-description="Support me!"
        data-message=""
        data-color="#FF813F"
        data-position="Right"
        data-x_margin="18"
        data-y_margin="18">
</script>
```

**位置**: 頁面右下角（固定浮動）

**多語言文案**:
| 語言 | Message |
|------|---------|
| 中文 | 感謝您的支持！ |
| English | Thank you for your support! |
| 日本語 | ご支援ありがとうございます！ |

**驗收標準**:
- [ ] 6 個頁面都有捐款按鈕
- [ ] 按鈕位置不干擾主要內容
- [ ] 點擊後正確開啟 Buy Me a Coffee 頁面
- [ ] 手機版顯示正常
- [ ] 各語言版本文案正確

**相依性**: TICKET-003, TICKET-004, TICKET-005, TICKET-006

**注意事項**:
請使用者提供 Buy Me a Coffee 的用戶名。

---

### Phase 3: 資料整合

#### TICKET-011: 更新資料收集邏輯
**優先級**: 🟡 中
**預估時間**: 20 分鐘
**狀態**: [ ] 待開發

**描述**:
更新 JavaScript 程式碼，收集新增的欄位（地點、時間、語言）。

**更新內容**:
```javascript
const data = {
    timestamp: new Date().toISOString(),
    year: year,
    month: month,
    day: day,
    birthTime: birthTime,        // 新增：24小時制時間
    hour: earthlyBranch,         // 轉換後的時辰
    location: location,          // 新增：地點
    gender: gender,
    language: currentLanguage    // 新增：當前語言
};
```

**驗收標準**:
- [ ] 所有新欄位都正確收集
- [ ] localStorage 包含所有欄位
- [ ] 資料格式正確
- [ ] Console 無錯誤訊息

**相依性**: TICKET-007, TICKET-008

---

#### TICKET-012: 更新 Google Sheets 整合
**優先級**: 🟡 中
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
更新 Google Apps Script 和前端程式碼，支援新增的資料欄位。

**任務內容**:
1. 更新 `GoogleAppsScript.gs`
2. 更新標題列（第一次執行時）
3. 更新資料傳送格式
4. 測試資料正確寫入

**新的欄位結構**:
```
| 時間戳記 | 西元年 | 月 | 日 | 出生時間 | 時辰 | 地點 | 性別 | 語言 |
```

**Google Apps Script 更新**:
```javascript
// 標題列
sheet.appendRow(['時間戳記', '西元年', '月', '日', '出生時間',
                 '時辰', '地點', '性別', '語言']);

// 資料列
sheet.appendRow([
    data.timestamp,
    data.year,
    data.month,
    data.day,
    data.birthTime,    // 新增
    data.hour,
    data.location,     // 新增
    data.gender,
    data.language      // 新增
]);
```

**驗收標準**:
- [ ] Google Sheets 顯示所有新欄位
- [ ] 資料正確寫入對應欄位
- [ ] 測試 3 種語言版本都能正確儲存
- [ ] 舊資料不受影響

**相依性**: TICKET-011

**注意事項**:
需要重新部署 Google Apps Script。

---

### Phase 4: 測試與文件

#### TICKET-013: 撰寫翻譯對照表
**優先級**: 🟢 低
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
建立完整的三語翻譯對照表，方便未來維護。

**檔案**: `翻譯對照表.md`

**內容結構**:
- 頁面標題
- 表單標籤
- 按鈕文字
- 提示訊息
- 錯誤訊息
- 命盤術語

**驗收標準**:
- [ ] 包含所有需要翻譯的文字
- [ ] 三語對照完整
- [ ] Markdown 格式正確
- [ ] 術語翻譯有註解說明

**相依性**: TICKET-003, TICKET-004, TICKET-005, TICKET-006

---

#### TICKET-014: 功能測試
**優先級**: 🔴 高
**預估時間**: 1 小時
**狀態**: [ ] 待開發

**描述**:
全面測試所有新功能。

**測試項目**:

**1. 語言切換測試**
- [ ] 中文 → 英文切換正常
- [ ] 中文 → 日文切換正常
- [ ] 英文 → 日文切換正常
- [ ] 語言偏好正確記憶

**2. 輸入功能測試**
- [ ] 地點輸入正常
- [ ] 時間輸入正常
- [ ] 時辰轉換正確
- [ ] 即時顯示正確

**3. 資料儲存測試**
- [ ] localStorage 正確儲存
- [ ] Google Sheets 正確寫入
- [ ] 所有欄位都有資料

**4. UI/UX 測試**
- [ ] 桌面版顯示正常
- [ ] 平板版顯示正常
- [ ] 手機版顯示正常
- [ ] 語言切換器位置正確
- [ ] Buy Me a Coffee 不干擾內容

**5. 跨瀏覽器測試**
- [ ] Chrome 正常
- [ ] Firefox 正常
- [ ] Safari 正常
- [ ] Edge 正常

**驗收標準**:
- [ ] 所有測試項目通過
- [ ] 無 Console 錯誤
- [ ] 無破版問題
- [ ] 使用者體驗流暢

**相依性**: 所有前面的 Tickets

---

#### TICKET-015: 更新專案文件
**優先級**: 🟢 低
**預估時間**: 30 分鐘
**狀態**: [ ] 待開發

**描述**:
更新 README 和相關文件，反映新功能。

**更新檔案**:
1. `README.md`
   - 新增多語言說明
   - 更新功能列表
   - 更新截圖（如有）

2. `部署教學.md`
   - 新增多語言頁面部署說明
   - 更新檔案清單

3. `GOOGLE_SHEETS_設定說明.md`
   - 更新欄位說明
   - 更新範例

**驗收標準**:
- [ ] 所有文件都已更新
- [ ] 資訊準確無誤
- [ ] Markdown 格式正確
- [ ] 連結都有效

**相依性**: TICKET-014

---

#### TICKET-016: 部署到 GitHub Pages
**優先級**: 🟢 低
**預估時間**: 15 分鐘
**狀態**: [ ] 待開發

**描述**:
將更新後的網站部署到 GitHub Pages。

**任務內容**:
```bash
git add .
git commit -m "feat: 新增多語言支援、地點輸入、24小時制、Buy Me a Coffee"
git push origin main
```

**驗收標準**:
- [ ] GitHub 上的程式碼已更新
- [ ] GitHub Pages 成功建置
- [ ] 線上版本功能正常
- [ ] 所有語言版本都可存取

**相依性**: TICKET-015

---

## 📊 進度追蹤

### 整體進度
```
Phase 1: 多語言基礎    [ ] 0/6  (0%)
Phase 2: 功能擴充      [ ] 0/4  (0%)
Phase 3: 資料整合      [ ] 0/2  (0%)
Phase 4: 測試與文件    [ ] 0/4  (0%)
─────────────────────────────────
總計:                  [ ] 0/16 (0%)
```

### 時間預估
- Phase 1: 2.5 小時
- Phase 2: 2.0 小時
- Phase 3: 0.8 小時
- Phase 4: 2.2 小時
- **總計**: 7.5 小時

---

## 🔄 Ticket 狀態說明

| 狀態 | 說明 |
|------|------|
| [ ] 待開發 | 尚未開始 |
| [🔄] 開發中 | 正在進行 |
| [🧪] 測試中 | 開發完成，等待測試 |
| [✅] 已完成 | 測試通過，已合併 |
| [🚫] 已封存 | 取消或不再需要 |

---

## 📝 更新記錄

| 日期 | Ticket | 狀態變更 | 備註 |
|------|--------|---------|------|
| 2025-10-29 | ALL | 建立 | 初始版本 |

---

## 🙋 問題與討論

### Q1: 是否需要支援簡體中文？
**決策**: 暫不支援，未來可擴充

### Q2: 時區轉換是否要實作？
**決策**: 暫不實作，記錄地點即可

### Q3: Buy Me a Coffee 的用戶名是？
**待確認**: 請使用者提供

---

## ✅ Definition of Done (DoD)

每個 Ticket 完成前必須滿足：
- [ ] 程式碼撰寫完成
- [ ] 自我測試通過
- [ ] 程式碼已註解
- [ ] 無 Console 錯誤或警告
- [ ] 相依的 Tickets 已完成
- [ ] 驗收標準全部達成
- [ ] 程式碼已提交到 Git

---

**文件維護者**: Claude Code
**最後更新**: 2025-10-29
